{% extends 'base_template.html' %}

{% block title %}
    Home
{% endblock %}

{% block style %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
{% endblock %}

{% block content %}
    <h2 align="center">Welcome to AskMate | Sprint 3 !</h2>
    <h5 align="center">Table of all questions down below.</h5>
    <div class="container">
    <form action="{{ url_for('qa_list') }}" id="form_order">

        <label for="order_by"> Order by
        </label>
            <select name="order_by" id="order_by">
                <option selected value="id">ID</option>
                <option value="title">Title</option>
                <option value="message">Message</option>
                <option value="view_number">View Number</option>
                <option value="vote_number">Vote Number</option>
                <option value="submission_time">Submission Time</option>
            </select>

        <label for="order_direction"> Order direction
        </label>
            <select name="order_direction" id="order_direction">
                <option selected value="ASC"> ASC </option>
                <option value="DESC"> DESC </option>
            </select>
        <button type="submit">
            Sort
        </button>
    </form>
    <table class="table table-striped">
  <thead>
    <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Message</th>
                <th>View Number</th>
                <th>Vote Number</th>
                <th>Submission Time</th>
                <th>Image</th>
                <th>Add Comment</th>
                <th>Edit Question</th>
                <th>Submitted By</th>
    </tr>
  </thead>

  <tbody>
      {%  for i in user_questions  %}
            <tr><td>{{ i.id }}</td>
                <td><a href="/question/{{ i.id }}">{{ i.title }}</a></td>
                <td>{{ i.message }}</td>
                <td>{{ i.view_number }}</td>
                <td>{{ i.vote_number }}</td>
                <td>{{ i.submission_time }}</td>
                {% if i.image == "" or i.image == " " %}
                    <td>No image</td>
                    {% else %}
                <td><img src="{{ url_for('static', filename=i.image) }}" alt="{{ i.image }}" width="200"></td>
                {% endif %}
                <td><a href="{{ url_for('add_new_comment', question_id=i.id) }}">Add comment</a></td>
                <td><a href="{{ url_for('edit_question', question_id=i.id) }}">Edit question</a></td>
                <td>{{ i.username }}</td>
            </tr>
            {% endfor %}
  </tbody>
</table>
    </div>
    <p align="center"></p>
{% endblock %}

